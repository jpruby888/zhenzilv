"use strict";var e=require("../../common/vendor.js"),o=require("../../utils/commonUtils.js");const n={__name:"loginWindow",emits:["showLogin"],setup(n,{emit:s}){const t=()=>{e.index.showLoading({title:"登陆中..."}),e.index.login().then((({code:n})=>{e.pn.callFunction({name:"zhenzilv",data:{api:"getUserFromCloud",code:n}}).then((n=>{e.index.hideLoading(),console.log("查找到的用户信息",n),n.result?(o.showSuccess("登录成功"),s("showLogin",{showLogin:!1,user:n.result.user,token:n.result.token}),e.index.setStorageSync("user",JSON.stringify(n.result.user)),e.index.setStorageSync("token",n.result.token)):(s("showLogin",{showLogin:!1,user:null,token:""}),e.index.navigateTo({url:"/pages/login/login"}))})).catch((e=>{console.log(e)}))}))};return(o,n)=>({a:e.o(t)})}};var s=e._export_sfc(n,[["__scopeId","data-v-444fe07e"]]);wx.createComponent(s);
